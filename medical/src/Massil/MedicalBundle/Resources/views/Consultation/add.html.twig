{% extends "MassilMedicalBundle::layout.html.twig" %}

{% block title %}
	Consultation : {{ patient.nom|capitalize~' '~patient.prenom|capitalize }}
{% endblock %}
{% block medical_body %}
	<div class="page-header">
		<h1><i class="glyphicon glyphicon-pushpin"></i> Consultation : <small> <i class="glyphicon glyphicon-user"></i> {{ patient.nom|capitalize~' '~patient.prenom|capitalize }}</small></h1>
		<i><strong>le : </strong>{{ consultation.date|date('d/m/Y') }} <strong> &agrave; : </strong> {{ consultation.date|date('H') }}<strong>h</strong>{{ consultation.date|date('i') }}</i>
	</div>
	
	{% if message == 'antecedant_delete' %}
		<div class="row">
			<div class="alert alert-info alert-dismissable">
				<button class="close" type="button" data-dismiss="alert" aria-hidden="true">&times;</button>
				<h5>
					<i class="glyphicon glyphicon-ok"></i>
					<strong>Info : </strong> Antecedant supprim&eacute; avec succ&egrave;s
				</h5>
			</div>
		</div>


	{% elseif message == 'antecedant_saved' %}
		<div class="row">
			<div class="alert alert-info alert-dismissable">
				<button class="close" type="button" data-dismiss="alert" aria-hidden="true">&times;</button>
				<h5>
					<i class="glyphicon glyphicon-ok"></i>
					<strong>Info : </strong> Antecedant enregitr&eacute; avec succ&egrave;s
				</h5>
			</div>
		</div>

	{% elseif message == 'antecedant_edit' %}
		<div class="row">
			<div class="alert alert-info alert-dismissable">
				<button class="close" type="button" data-dismiss="alert" aria-hidden="true">&times;</button>
				<h5>
					<i class="glyphicon glyphicon-ok"></i>
					<strong>Info : </strong> Antecedant modifi&eacute; avec succ&egrave;s
				</h5>
			</div>
		</div>

	{% endif %}
	
	<form method="post" {{ form_enctype(form) }}>
	<div class="row">
	<div class="btn-group col-md-6">
		<a href="{{ path('medical_patient_show',{'id':patient.id}) }}" class="btn btn-default">
			<i class="glyphicon glyphicon-chevron-left"></i>
			Retour vers patient
		</a>
		<button type="submit" class="btn btn-success">
			<i class="glyphicon glyphicon-floppy-disk"></i>
			Enregistrer
		</button>
	</div>
	</div>
	<br>
	<div class="row">
		<div class="col-md-5">
			<div class="panel panel-primary">
				<div class="panel-heading">
					<h4>Constantes vitales</h4>
				</div>
				<div class="panel-body">
					{% include "MassilMedicalBundle:Consultation:constante.html.twig" %}
				</div>
			</div>
		</div>
		<div class="col-md-7">
			<div class="panel panel-primary">
				<div class="panel-heading">
					<h4>Ant&egrave;cedants</h4>
				</div>
				<div class="panel-body">
					<div class="col-md-12">
						<ul class="list-group">
							{% for antecedant in antecedants %}
								<li class="list-group-item">
									<h4 class="list-group-item-heading">{{ antecedant.type }}</h4>
									<p class="list-group-item-text">{{ antecedant.contenu|raw }}</p>
									<div class="btn-group col-md-12">
										<a href="{{ path('medical_antecedant_edit',{'id':antecedant.id}) }}" class="btn btn-primary">
											<i class="glyphicon glyphicon-edit"></i>
											Modifier
										</a>
										<a href="{{ path('medical_antecedant_delete',{'id':antecedant.id}) }}" class="btn btn-danger">
											<i class="glyphicon glyphicon-trash"></i>
											Supprimer
										</a>										
									</div>
								</li>
							{% endfor %}
						</ul>
					</div>
					<div class="center-block">
						<a href="{{ path('medical_antecedant_add',{'id':patient.id}) }}" class="btn btn-success">
							<i class="glyphicon glyphicon-plus-sign"></i>
							Ajouter un antecedant
						</a>
					</div>
				</div>
			</div>
		</div>
	</div>
	<div class="row">
		<div class="col-md-6">
			<div class="panel panel-primary">
				<div class="panel-heading">
					<h4>Motif de consultation</h4>
				</div>
				<div class="panel-body">
					{% include "MassilMedicalBundle:Consultation:motif.html.twig" %}
				</div>
			</div>
		</div>
		<div class="col-md-6">
			<div class="panel panel-primary">
				<div class="panel-heading">
					<h4>Diagnostic</h4>
				</div>
				<div class="panel-body">
					{% include "MassilMedicalBundle:Consultation:diagnostic.html.twig" %}
				</div>
			</div>
		</div>
	</div>
	<div class="row">
		<div class="col-md-6">
			<div class="panel panel-primary">
				<div class="panel-heading">
					<h4>Ordonance</h4>
				</div>
				<div class="panel-body">
					{% include "MassilMedicalBundle:Consultation:ordonnance.html.twig" %}
				</div>
			</div>
		</div>
		<div class="col-md-6">
			<div class="panel panel-primary">
				<div class="panel-heading">
					<h4>Examens</h4>
				</div>
				<div class="panel-body">
					<div class="row col-md-12">
						{% include "MassilMedicalBundle:Consultation:clinique.html.twig" %}
					</div>	
					<br>
					<div class="row col-md-12">
						{% include "MassilMedicalBundle:Consultation:paraclinique.html.twig" %}
					</div>	
				</div>
			</div>
		</div>
			<!--$("#massil_medicalbundle_consultationtype_diagnostic").val()-->
	</div>
	{{ form_rest(form) }}
	</form>
	{% block javascript %}
		{{ parent() }}
		<script type="text/javascript" src="{{ asset('tinymce/js/tinymce/tinymce.min.js') }}"></script>
		<script type="text/javascript" src="{{ asset('js/add-tinymce-config.js') }}"></script>
	{% endblock %}
{% endblock %}